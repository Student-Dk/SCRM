<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }
        body{
            display: flex;
            background-color: #f0f3f6;
        }
        .container{
            display: flex;
            width: 100%;
        }
        .sidebar{
            background-color: #1c1f26;
            width: 250px;
            min-height: 100vh;
            color: white;
            padding: 20px;
            
        }


        .logo{
           
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 30px;
        }
         .profile {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }
   
         .profile img {
            width: 50px;
            border-radius: 50%;
            margin-right: 10px;
        }
          .welcome {
            font-size: 14px;
        }
       
         .status {
            display: block;
            font-size: 12px;
            color: #00e676;
        }
        
        .nav a{
           
             display: flex;
            align-items: center;
            padding: 10px 0;
            color: #ccc;
            text-decoration: none;
            transition: 0.3s;
            

        }
        .nav a:hover{
            color: #fff;
        }
        .nav li{
            list-style-type: none;
        }
        .main-content {
  flex-grow: 1;
  padding: 40px;
  background-color: #f4f7fa;
  min-height: 100vh;
  overflow-y: auto;
}

.bigbox {
  max-width: 900px;
  margin: auto;
}

.home {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}

.home a {
  text-decoration: none;
  color: #007bff;
  font-weight: 600;
  border-bottom: 2px solid transparent;
  transition: border-color 0.3s ease;
}

.home a:hover {
  border-bottom: 2px solid #007bff;
}

.p1 {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 30px;
  color: #333;
}

.box {
  background: #fff;
  border-radius: 10px;
  padding: 20px 25px;
  margin-bottom: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  position: relative;
}

.box p {
  margin-bottom: 8px;
  color: #444;
  font-size: 15px;
}

.box button {
  position: absolute;
  right: 25px;
  top: 25px;
  background-color: #007bff;
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: background-color 0.3s ease;
}

.box button:hover {
  background-color: #0056b3;
}

.box > .box {
  margin-top: 15px;
  background-color: #f9fafb;
  padding: 15px;
  border-radius: 8px;
  box-shadow: none;
  position: static;
}

.box > .box textarea {
  width: 100%;
  height: 100px;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 10px;
  font-family: inherit;
  font-size: 14px;
  resize: none;
  color: #555;
}
 </style>
</head>
<body>
    
    <div class="container">
     <aside class="sidebar">
        <div class="logo">SCRM</div>
        
       <div class="profile">
         <img src="https://www.w3schools.com/howto/img_avatar.png" alt="user">
        <div class="welcome">
            <p><Strong>Welcome</Strong><br>
                <%=user.name%>
                </p>
            <span class="status online">‚óè Online</span>
            
        </div>
       </div>
       <nav class="nav">
       <ul>
        <li><a href="">BROWSE</a></li>
                    <li><a href="/dashboard/<%=user._id%>"><i class="fas fa-home"></i> Dashboard</a></li>

                    <li>
                        <form action="/change_password" method="post">
                            <input type="hidden" name="id" value="<%=user._id%>">
                            <button type="submit" style=" background-color: #1c1f26; border: none; color: rgb(180, 180, 180); font-size: 15px; cursor: pointer;">Change password</button>
                        </form>
                    </li>
                    <li><a href="/profile/<%=user._id%>">Profile</a></li>
                    <li><a href="/req_quote/<%=user._id%>">Request a Quote</a></li>
                    <li><a href="/manage-quotes/<%=user._id%>">Quotes History</a></li>
                    <li><a href="/create_ticket/<%=user.id%>">Create Ticket</a></li>


                    <li> <td><a href="/vtc/<%=user._id%>">view</a></td>

       </ul>
      </nav>
     </aside>
     <main class="main-content">
 
      <div class="bigbox">
                <div class="home">
                    <a href="/dashboard/<%=user._id%>">Dashboard</a>
                    
                    <a href="">view ticket</a>
                </div>
                <p class="p1"> Ticket support </p>
                <%i=1%>
                    <% ticket.forEach(user=> { %>

                        <div class="box">


                            <p>
                                <%=user.subject%>
                            </p>
                            <p>
                               <span style="color: blue;">Ticket# <%=i++%></span>  <span>Created on  <%=user.date%></span>
                            </p>

                          
                            <p>
                                <%=user.description%>
                            </p>
                            <button onclick="myfunction(this)">view</button>

                            <div class="box" style="display: none;">
                                <!-- <form action="/ticketresponse" method="post"
                                    onsubmit="alert('ticket has been updated')">
                                    <input type="hidden" name="id" value="<%=user._id%>">
                                    <textarea name="adminresponse" style="padding: 5px;"></textarea>
                                    <input type="submit" value="update">
                                </form> -->
                               <textarea name=" adminresponse" disabled><%= user.adminresponse%></textarea>
                            </div>





                        </div>





                        <% }) %>

            </div>
        
     </main>
      
    </div>

    <script>
        function myfunction(btn) {
            // Find the next sibling div with class 'box' and toggle it
            let targetDiv = btn.nextElementSibling;
            if (targetDiv && targetDiv.classList.contains('box')) {
                targetDiv.style.display = targetDiv.style.display === 'none' ? 'block' : 'none';
            }
        }
    </script>
</body>
</html>